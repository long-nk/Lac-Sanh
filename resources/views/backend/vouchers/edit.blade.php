@extends('backend.layout.master')@section('title', 'Cập nhật voucher | Dashboard')@section('content')    <!-- page content -->    <div class="right_col" role="main">        <div class="">            <div class="page-title">                <div class="col-md-12">                    <h3 class="text-center">Cập nhật voucher</h3>                </div>                <div class="col-md-12" style="padding: 0px;">                    <a href="{{URL::previous()}}" class="btn btn-default"><i class="fa fa-reply"></i> Quay lại</a>                </div>            </div>            <div class="clearfix"></div>            <div class="row">                <div class="col-md-12 col-sm-12 col-xs-12">                    <div class="x_panel">                        <div class="x_title">                            <h2>Voucher</h2>                            <div class="clearfix"></div>                        </div>                        <div class="x_content">                            <form class="form-horizontal form-label-left"                                  action="{{route('vouchers.update', $voucher->id)}}" enctype="multipart/form-data"                                  autocomplete="off" method="post">                                <input type="hidden" name="_token" value="{{ csrf_token() }}">                                <input name="_method" type="hidden" value="PUT">                                <div class="item form-group">                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="name">Tên voucher                                        <span class="required">*</span>                                    </label>                                    <div class="col-md-6 col-sm-6 col-xs-12">                                        <textarea id="code" value="{{$voucher->name}}"                                               class="form-control col-md-7 col-xs-12" name="name" type="text"                                               required>{!! $voucher->name !!}</textarea>                                        @if ($errors->has('name'))                                            <div id="formMessage" class="alert alert-danger">                                                <strong>{{ $errors->first('name') }}</strong>                                            </div>                                        @endif                                    </div>                                </div>                                <div class="item form-group">                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="name">Mã voucher                                        <span class="required">*</span>                                    </label>                                    <div class="col-md-6 col-sm-6 col-xs-12">                                        <input id="code" value="{{$voucher->code}}"                                               class="form-control col-md-7 col-xs-12" name="code" type="text"                                               required>                                        @if ($errors->has('code'))                                            <div id="formMessage" class="alert alert-danger">                                                <strong>{{ $errors->first('code') }}</strong>                                            </div>                                        @endif                                    </div>                                </div>                                <div class="item form-group">                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="number">Hình ảnh <span                                            class="required">*</span>                                    </label>                                    <div class="col-md-6 col-sm-6 col-xs-12">                                        <div class="box_show_img">                                            <img src="{{asset('' . @$voucher->image)}}" alt="" id="img_show">                                            <i class="">+</i>                                        </div>                                        {{--<div class="box_upload">--}}                                        {{--Chọn hình ảnh--}}                                        <input type="file" class="hide_file" name="image"                                               onchange="show_img_selected(this)">                                        {{--</div>--}}                                    </div>                                </div>                                <div class="item form-group" id="list-area-update-filter">                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="name">Chọn loại dịch vụ áp dụng<span class="required">*</span>                                    </label>                                    <div class="col-md-6 col-sm-6 col-xs-12">                                        <select class="form-control" multiple="multiple" name="list_type[]"                                                id="choose-type">                                            <option value="{{\App\Models\Comforts::KS}}" {{$voucher->hotel ? 'selected' : ''}}>Khách sạn & resort</option>                                            <option value="{{\App\Models\Comforts::TO}}" {{$voucher->tour ? 'selected' : ''}}>Tour</option>                                            {{--                                            <option value="{{\App\Models\Comforts::TO}}">Villa</option>--}}                                            {{--                                            <option value="{{\App\Models\Comforts::RS}}">Resort</option>--}}                                            {{--                                            <option value="{{\App\Models\Comforts::HS}}">Homestay</option>--}}                                            {{--                                            <option value="{{\App\Models\Comforts::DT}}">Du thuyền</option>--}}                                        </select>                                    </div>                                </div>                                <div class="item form-group">                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="name">Phần trăm giảm giá                                        <span class="required">*</span>                                    </label>                                    <div class="col-md-6 col-sm-6 col-xs-12">                                        <input id="code" value="{{$voucher->percent}}"                                               class="form-control col-md-7 col-xs-12" name="percent" type="number"                                               required>                                        @if ($errors->has('code'))                                            <div id="formMessage" class="alert alert-danger">                                                <strong>{{ $errors->first('code') }}</strong>                                            </div>                                        @endif                                    </div>                                </div>                                <div class="item form-group">                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="number">Giá trị đơn hàng                                    </label>                                    <div class="col-md-6 col-sm-6 col-xs-12">                                        <input id="cost" class="form-control col-md-7 col-xs-12"                                               name="cost" value="{{$voucher->cost}}" type="text" placeholder="Nhập giá trị nhỏ nhất của đơn hàng được áp voucher">                                        @if ($errors->has('cost'))                                            <div id="formMessage" class="alert alert-danger">                                                <strong>{{ $errors->first('cost') }}</strong>                                            </div>                                        @endif                                    </div>                                </div>                                <div class="item form-group">                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="number">Số lượng voucher<span class="required">*</span>                                    </label>                                    <div class="col-md-6 col-sm-6 col-xs-12">                                        <input id="number" class="form-control col-md-7 col-xs-12"                                               name="number" value="{{$voucher->number}}" type="number" placeholder="Nhập số lượng voucher" required>                                        @if ($errors->has('number'))                                            <div id="formMessage" class="alert alert-danger">                                                <strong>{{ $errors->first('number') }}</strong>                                            </div>                                        @endif                                    </div>                                </div>                                <div class="item form-group">                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="number">Số lượng đã dùng<span class="required">*</span>                                    </label>                                    <div class="col-md-6 col-sm-6 col-xs-12">                                        <input id="used" class="form-control col-md-7 col-xs-12"                                               name="used" value="{{$voucher->used ?? 0}}" type="number" placeholder="Nhập số lượng đã dùng" required>                                        @if ($errors->has('used'))                                            <div id="formMessage" class="alert alert-danger">                                                <strong>{{ $errors->first('used') }}</strong>                                            </div>                                        @endif                                    </div>                                </div>                                <div class="item form-group">                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="text">Điều kiện & thể lệ<span                                            class="required">*</span>                                    </label>                                    <div class="col-md-6 col-sm-6 col-xs-12">                                        <textarea name="term" id="editor2" value=""                                                  class="form-control" cols="30" rows="10" placeholder="Nội dung">                                                {!! $voucher->term !!}                                        </textarea>                                        @if ($errors->has('term'))                                            <div id="formMessage" class="alert alert-danger">                                                <strong>{{ $errors->first('term') }}</strong>                                            </div>                                        @endif                                    </div>                                </div>                                <div class="item form-group">                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="name">Ngày bắt đầu                                        <span class="required">*</span>                                    </label>                                    <div class="col-md-3 col-sm-6 col-xs-12">                                        <input id="start_date" value="{{$voucher->start_date}}"                                               class="form-control col-md-7 col-xs-12" name="start_date" type="date"                                               required>                                        @if ($errors->has('start_date'))                                            <div id="formMessage" class="alert alert-danger">                                                <strong>{{ $errors->first('start_date') }}</strong>                                            </div>                                        @endif                                    </div>                                </div>                                <div class="item form-group">                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="name">Ngày kết thúc                                        <span class="required">*</span>                                    </label>                                    <div class="col-md-3 col-sm-6 col-xs-12">                                        <input id="end_date" value="{{$voucher->end_date}}"                                               class="form-control col-md-7 col-xs-12" name="end_date" type="date"                                               required>                                        @if ($errors->has('end_date'))                                            <div id="formMessage" class="alert alert-danger">                                                <strong>{{ $errors->first('end_date') }}</strong>                                            </div>                                        @endif                                    </div>                                </div>{{--                                <div class="item form-group">--}}{{--                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="email">Sử dụng cho tất cả khách sạn--}}{{--                                        <span class="required">*</span>--}}{{--                                    </label>--}}{{--                                    <div class="col-md-3 col-sm-6 col-xs-12">--}}{{--                                        <select name="status" id="status" class="form-control" required>--}}{{--                                            <option value="1" {{$voucher->check_all == 1 ? 'selected' : ''}}>Có áp dụng</option>--}}{{--                                            <option value="0" {{$voucher->check_all == 0 ? 'selected' : ''}}>Không áp dụng</option>--}}{{--                                        </select>--}}{{--                                    </div>--}}{{--                                </div>--}}                                <div class="item form-group">                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="email">Trạng thái hiển thị                                        <span class="required">*</span>                                    </label>                                    <div class="col-md-3 col-sm-6 col-xs-12">                                        <select name="status" id="status" class="form-control" required>                                            <option value="1" {{$voucher->status == 1 ? "selected" : ""}}>Hiển thị</option>                                            <option value="0" {{$voucher->status == 0 ? "selected" : ""}}>Không hiển thị</option>                                        </select>                                    </div>                                </div>                                <div class="ln_solid"></div>                                <div class="form-group">                                    <div class="col-md-6 col-md-offset-3">                                        <button type="submit" class="btn btn-success">Update</button>                                    </div>                                </div>                            </form>                        </div>                    </div>                </div>            </div>        </div>    </div>    <!-- /page content -->@endsection@push('js')    <script src="{{asset('libs/ckeditor/ckeditor.js')}}"></script>    <script src="{{asset('libs/validator/validator.js')}}"></script>    <script>        // initialize the validator function        validator.message.date = 'not a real date';        // validate a field on "blur" event, a 'select' on 'change' event & a '.reuired' classed multifield on 'keyup':        $('form')            .on('blur', 'input[required], input.optional, select.required', validator.checkField)            .on('change', 'select.required', validator.checkField)            .on('keypress', 'input[required][pattern]', validator.keypress);        $('.multi.required').on('keyup blur', 'input', function () {            validator.checkField.apply($(this).siblings().last()[0]);        });        $('form').submit(function (e) {            e.preventDefault();            var submit = true;            // evaluate the form using generic validaing            if (!validator.checkAll($(this))) {                submit = false;            }            if (submit)                this.submit();            return false;        });        //Show image to box when select        function show_img_selected(input) {            if (input.files && input.files[0]) {                var reader = new FileReader();                reader.onload = function (e) {                    $('#img_show').attr('src', e.target.result)                };                reader.readAsDataURL(input.files[0]);            }        }    </script>    <script>        $('#choose-type').select2();        CKEDITOR.replace('editor2', {            filebrowserUploadUrl: "{{route('upload', ['_token' => csrf_token() ])}}",            filebrowserUploadMethod: 'form',        });        CKEDITOR.replace('editor22', {            filebrowserUploadUrl: "{{route('upload', ['_token' => csrf_token() ])}}",            filebrowserUploadMethod: 'form',        });    </script>@endpush